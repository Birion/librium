"use strict";var ns;ns={};ns.model=function(){var $eventPump;$eventPump=$("body");return{init:function init(rtype){var _id=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var ajaxOptions;ajaxOptions={type:"GET",url:_id?"/api/"+rtype+"/"+_id:"/api/"+rtype,accepts:"application/json",dataType:"json"};return $.ajax(ajaxOptions).done(function(data){return $eventPump.trigger("model_init_success",[data,rtype])}).fail(function(xhr,textStatus,errorThrown){return $eventPump.trigger("model_error",[xhr,textStatus,errorThrown])})},read:function read(rtype){var _id=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var ajaxOptions;ajaxOptions={type:"GET",url:_id?"/api/"+rtype+"/"+_id:"/api/"+rtype,accepts:"application/json",dataType:"json"};return $.ajax(ajaxOptions).done(function(data){return $eventPump.trigger("model_read_success",[data])}).fail(function(xhr,textStatus,errorThrown){return $eventPump.trigger("model_error",[xhr,textStatus,errorThrown])})}}}();ns.view=function(){var $dropdown;$dropdown=$(".ui.dropdown");return{updateDropdown:function updateDropdown(vals){return console.log(vals)}}}();ns.controller=function(m,v){var $eventPump,bookID,model,values,view;model=m;view=v;$eventPump=$("body");bookID=$("#_id").val();values={};setTimeout(function(){model.init("book",bookID);model.init("authors");model.init("formats");console.log(values["formats"]);return view.updateDropdown(values.formats)},100);$eventPump.on("model_init_success",function(e,data,rtype){return values[rtype]=data});$eventPump.on("model_read_success",function(e,data){return console.log(data)});return $eventPump.on("model_error",function(e,xhr,textStatus,errorThrown){var error_msg;error_msg=textStatus+": "+errorThrown+" - "+xhr.responseJSON.detail;return console.log(error_msg)})}(ns.model,ns.view);