{% extends 'base.html' %}

{% block title %}Index{% endblock %}

{% block content %}
    <div class="row">
        <div class="col s8 offset-s2">
            <ul class="collapsible">
                {% for author in authors %}
                    <li>
                        <div class="collapsible-header"><i class="material-icons">face</i>{{ author.author }}</div>
                        <div class="collapsible-body">
                            {% for series in author.series %}
                                {% set coll_class = "collection with-header" if series.series != "0" else "collection" %}
                                <ul class="{{ coll_class }}">
                                    {% if series.series != "0" %}
                                        <li class="collection-header"><h6>{{ series.series }}</h6></li>
                                    {% endif %}
                                    {% for book in series.books %}
                                         <li class="collection item">
                                            <i class="material-icons tiny">{{ "check" if book.read else "book" }}</i>
                                            <a href="{{ url_for("book.index", id=book.id) }}">{{ book.book }}</a>
                                            ({{ book.year }})
                                            {% if book.idx and book.idx != -1 %}
                                                <span class="secondary-content">{{ book.idx }}</span>
                                            {% endif %}
                                        </li>
                                    {% endfor %}
                                </ul>
                            {% endfor %}
                        </div>
                    </li>
                {% endfor %}
            </ul>
        </div>
    </div>
    {% include "main/pagination.html" %}
{% endblock %}