swagger: '2.0'
info:
  description: A simple book database.
  version: 1.0.0
  title: librium
  contact:
    email: ondrej.vagner@gmail.com
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT

consumes:
- application/json
produces:
- application/json

tags:
- name: book
  description: Show information about your books
paths:

  /books:
    get:
      tags:
      - Book
      summary: List all books
      description: ""
      operationId: librium.api.book.read
      parameters:
        - $ref: "#/parameters/lengthParam"
        - $ref: "#/parameters/offsetParam"
        - $ref: "#/parameters/sortParam"
        - $ref: "#/parameters/ascParam"
      responses:
        200:
          $ref: "#/responses/ReturnMultipleBooks"
  /book:
    post:
      tags:
      - Book
      summary: Create a new book
      description: ""
      operationId: librium.api.book.create
      parameters:
      - name: book
        in: body
        description: Book to be created
        required: true
        schema:
          $ref: "#/definitions/Book"
      responses:
        201:
          $ref: "#/responses/ObjectCreated"
        400:
          $ref: "#/responses/ObjectExists"
  /book/{id}:
    get:
      operationId: librium.api.book.read_by_id
      tags:
      - Book
      summary: Get one book from the database
      description: ""
      parameters:
      - $ref: "#/parameters/idParam"
      responses:
        200:
          $ref: "#/responses/ReturnSingleBook"
        404:
          $ref: "#/responses/ObjectNotExists"
    put:
      operationId: librium.api.book.update_by_id
      tags:
      - Book
      summary: Update book
      description: ""
      parameters:
      - $ref: "#/parameters/idParam"
      - name: book
        in: body
        schema:
          $ref: "#/definitions/Book"
      responses:
        200:
          $ref: "#/responses/ObjectUpdated"
        404:
          $ref: "#/responses/ObjectNotExists"
    delete:
      operationId: librium.api.book.delete_by_id
      tags:
      - Book
      summary: Remove a book from the database
      description: ""
      parameters:
      - $ref: "#/parameters/idParam"
      responses:
        200:
          $ref: "#/responses/ObjectDeleted"
        404:
          $ref: "#/responses/ObjectNotExists"
  /book/{isbn}:
    get:
      operationId: librium.api.book.read_by_isbn
      tags:
      - Book
      summary: Get one book from the database
      description: ""
      parameters:
      - $ref: "#/parameters/isbnParam"
      responses:
        200:
          $ref: "#/responses/ReturnSingleBook"
        404:
          $ref: "#/responses/ObjectNotExists"
    put:
      operationId: librium.api.book.update_by_isbn
      tags:
      - Book
      summary: Update book
      description: ""
      parameters:
      - $ref: "#/parameters/isbnParam"
      - name: book
        in: body
        schema:
          $ref: "#/definitions/Book"
      responses:
        200:
          $ref: "#/responses/ObjectUpdated"
        404:
          $ref: "#/responses/ObjectNotExists"
    delete:
      operationId: librium.api.book.delete_by_isbn
      tags:
      - Book
      summary: Remove a book from the database
      description: ""
      parameters:
      - $ref: "#/parameters/isbnParam"
      responses:
        200:
          $ref: "#/responses/ObjectDeleted"
        404:
          $ref: "#/responses/ObjectNotExists"

  /authors:
    get:
      tags:
      - Author
      summary: List all authors
      description: ""
      operationId: librium.api.author.read
      parameters:
        - $ref: "#/parameters/lengthParam"
        - $ref: "#/parameters/offsetParam"
        - $ref: "#/parameters/sortParam"
        - $ref: "#/parameters/ascParam"
      responses:
        200:
          $ref: "#/responses/ReturnMultipleAuthors"
  /author:
    post:
      tags:
      - Author
      summary: Create a new author
      description: ""
      operationId: librium.api.author.create
      parameters:
      - name: author
        in: body
        description: Author to be created
        required: true
        schema:
          $ref: "#/definitions/Author"
      responses:
        201:
          $ref: "#/responses/ObjectCreated"
        400:
          $ref: "#/responses/ObjectExists"
  /author/{id}:
    get:
      operationId: librium.api.author.read_one
      tags:
      - Author
      summary: Get one author from the database
      description: ""
      parameters:
      - $ref: "#/parameters/idParam"
      responses:
        200:
          $ref: "#/responses/ReturnSingleAuthor"
        404:
          $ref: "#/responses/ObjectNotExists"
    put:
      operationId: librium.api.author.update
      tags:
      - Author
      summary: Update an author
      description: ""
      parameters:
      - $ref: "#/parameters/idParam"
      - name: author
        in: body
        schema:
          $ref: "#/definitions/Author"
      responses:
        200:
          $ref: "#/responses/ObjectUpdated"
        404:
          $ref: "#/responses/ObjectNotExists"
    delete:
      operationId: librium.api.author.delete
      tags:
      - Author
      summary: Remove an author from the database
      description: ""
      parameters:
      - $ref: "#/parameters/idParam"
      responses:
        200:
          $ref: "#/responses/ObjectDeleted"
        404:
          $ref: "#/responses/ObjectNotExists"

  /genres:
    get:
      tags:
      - Genre
      summary: List all genres
      description: ""
      operationId: librium.api.genre.read
      parameters:
        - $ref: "#/parameters/lengthParam"
        - $ref: "#/parameters/offsetParam"
        - $ref: "#/parameters/sortParam"
        - $ref: "#/parameters/ascParam"
      responses:
        200:
          $ref: "#/responses/ReturnMultipleGenres"
  /genre:
    post:
      tags:
      - Genre
      summary: Create a new genre
      description: ""
      operationId: librium.api.genre.create
      parameters:
      - name: name
        in: body
        description: Genre to be created
        required: true
        schema:
          type: string
          description: Name of the genre
      responses:
        201:
          $ref: "#/responses/ObjectCreated"
        400:
          $ref: "#/responses/ObjectExists"
  /genre/{id}:
    get:
      operationId: librium.api.genre.read_one
      tags:
      - Genre
      summary: Get one genre from the database
      description: ""
      parameters:
      - $ref: "#/parameters/idParam"
      responses:
        200:
          $ref: "#/responses/ReturnSingleGenre"
        404:
          $ref: "#/responses/ObjectNotExists"
    put:
      operationId: librium.api.genre.update
      tags:
      - Genre
      summary: Update a genre
      description: ""
      parameters:
      - $ref: "#/parameters/idParam"
      - $ref: "#/parameters/nameParam"
      responses:
        200:
          $ref: "#/responses/ObjectUpdated"
        404:
          $ref: "#/responses/ObjectNotExists"
    delete:
      operationId: librium.api.genre.delete
      tags:
      - Genre
      summary: Remove a genre from the database
      description: ""
      parameters:
      - $ref: "#/parameters/idParam"
      responses:
        200:
          $ref: "#/responses/ObjectDeleted"
        404:
          $ref: "#/responses/ObjectNotExists"

  /languages:
    get:
      tags:
      - Language
      summary: List all languages
      description: ""
      operationId: librium.api.language.read
      parameters:
        - $ref: "#/parameters/lengthParam"
        - $ref: "#/parameters/offsetParam"
        - $ref: "#/parameters/sortParam"
        - $ref: "#/parameters/ascParam"
      responses:
        200:
          $ref: "#/responses/ReturnMultipleLanguages"
  /language:
    post:
      tags:
      - Language
      summary: Create a new language
      description: ""
      operationId: librium.api.language.create
      parameters:
      - name: name
        in: body
        description: language to be created
        required: true
        schema:
          type: string
          description: Name of the language
      responses:
        201:
          $ref: "#/responses/ObjectCreated"
        400:
          $ref: "#/responses/ObjectExists"
  /language/{id}:
    get:
      operationId: librium.api.language.read_one
      tags:
      - Language
      summary: Get one language from the database
      description: ""
      parameters:
      - $ref: "#/parameters/idParam"
      responses:
        200:
          $ref: "#/responses/ReturnSingleLanguage"
        404:
          $ref: "#/responses/ObjectNotExists"
    put:
      operationId: librium.api.language.update
      tags:
      - Language
      summary: Update a language
      description: ""
      parameters:
      - $ref: "#/parameters/idParam"
      - $ref: "#/parameters/nameParam"
      responses:
        200:
          $ref: "#/responses/ObjectUpdated"
        404:
          $ref: "#/responses/ObjectNotExists"
    delete:
      operationId: librium.api.language.delete
      tags:
      - Language
      summary: Remove a language from the database
      description: ""
      parameters:
      - $ref: "#/parameters/idParam"
      responses:
        200:
          $ref: "#/responses/ObjectDeleted"
        404:
          $ref: "#/responses/ObjectNotExists"

  /publishers:
    get:
      tags:
      - Publisher
      summary: List all publishers
      description: ""
      operationId: librium.api.publisher.read
      parameters:
        - $ref: "#/parameters/lengthParam"
        - $ref: "#/parameters/offsetParam"
        - $ref: "#/parameters/sortParam"
        - $ref: "#/parameters/ascParam"
      responses:
        200:
          $ref: "#/responses/ReturnMultiplePublishers"
  /publisher:
    post:
      tags:
      - Publisher
      summary: Create a new publisher
      description: ""
      operationId: librium.api.publisher.create
      parameters:
      - name: name
        in: body
        description: Publisher to be created
        required: true
        schema:
          type: string
          description: Publisher name
      responses:
        201:
          $ref: "#/responses/ObjectCreated"
        400:
          $ref: "#/responses/ObjectExists"
  /publisher/{id}:
    get:
      operationId: librium.api.publisher.read_one
      tags:
      - Publisher
      summary: Get one publisher from the database
      description: ""
      parameters:
      - $ref: "#/parameters/idParam"
      responses:
        200:
          $ref: "#/responses/ReturnSinglePublisher"
        404:
          $ref: "#/responses/ObjectNotExists"
    put:
      operationId: librium.api.publisher.update
      tags:
      - Publisher
      summary: Update a publisher
      description: ""
      parameters:
      - $ref: "#/parameters/idParam"
      - $ref: "#/parameters/nameParam"
      responses:
        200:
          $ref: "#/responses/ObjectUpdated"
        404:
          $ref: "#/responses/ObjectNotExists"
    delete:
      operationId: librium.api.publisher.delete
      tags:
      - Publisher
      summary: Remove a publisher from the database
      description: ""
      parameters:
      - $ref: "#/parameters/idParam"
      responses:
        200:
          $ref: "#/responses/ObjectDeleted"
        404:
          $ref: "#/responses/ObjectNotExists"

  /series:
    get:
      tags:
      - Series
      summary: List all series
      description: ""
      operationId: librium.api.series.read
      parameters:
        - $ref: "#/parameters/lengthParam"
        - $ref: "#/parameters/offsetParam"
        - $ref: "#/parameters/sortParam"
        - $ref: "#/parameters/ascParam"
      responses:
        200:
          $ref: "#/responses/ReturnMultipleSeries"
    post:
      tags:
      - Series
      summary: Create a new series
      description: ""
      operationId: librium.api.series.create
      parameters:
      - name: name
        in: body
        description: Series to be created
        required: true
        schema:
          type: string
          description: Name of the series
      responses:
        201:
          $ref: "#/responses/ObjectCreated"
        400:
          $ref: "#/responses/ObjectExists"
  /series/{id}:
    get:
      operationId: librium.api.series.read_one
      tags:
      - Series
      summary: Get one series from the database
      description: ""
      parameters:
      - $ref: "#/parameters/idParam"
      responses:
        200:
          $ref: "#/responses/ReturnSingleSeries"
        404:
          $ref: "#/responses/ObjectNotExists"
    put:
      operationId: librium.api.series.update
      tags:
      - Series
      summary: Update a series
      description: ""
      parameters:
      - $ref: "#/parameters/idParam"
      - $ref: "#/parameters/nameParam"
      responses:
        200:
          $ref: "#/responses/ObjectUpdated"
        404:
          $ref: "#/responses/ObjectNotExists"
    delete:
      operationId: librium.api.series.delete
      tags:
      - Series
      summary: Remove a series from the database
      description: ""
      parameters:
      - $ref: "#/parameters/idParam"
      responses:
        200:
          $ref: "#/responses/ObjectDeleted"
        404:
          $ref: "#/responses/ObjectNotExists"

parameters:
  idParam:
    name: id
    in: path
    description: Object ID
    type: integer
    required: true
  nameParam:
    name: name
    in: query
    description: Object name
    type: string
    required: true
  isbnParam:
    name: isbn
    in: path
    description: ISBN
    type: string
    required: true
  lengthParam:
    name: length
    in: query
    type: integer
    default: 50
    description: Number to get
    required: false
  offsetParam:
    name: offset
    in: query
    type: integer
    default: 0
    description: Offset from the beginning
    required: false
  sortParam:
    name: sort
    in: query
    type: string
    default: id
    description: Sort-by field
    required: false
  ascParam:
    name: asc
    in: query
    type: boolean
    default: true
    description: Sort in ascending order
    required: false

definitions:
  Author:
    type: object
    required:
    - first_name
    - last_name
    properties:
      first_name:
        type: string
        description: First name of the author
      last_name:
        type: string
        description: Last name of the author
      middle_name:
        type: string
        description: Middle name of the author, if any
      prefix:
        type: string
        description: Author's title as a prefix
      suffix:
        type: string
        description: Author's title as a suffix
  Book:
    type: object
    required:
    - title
    properties:
      title:
        type: string
        description: Book title
      genres:
        type: array
        description: Book genre(s)
        items:
          $ref: "#/definitions/Genre"
      format:
        type: string
        description: Book format
      price:
        type: integer
        description: Original book price
      page_count:
        type: integer
        description: Book page count
      authors:
        type: array
        description: Book author(s)
        items:
        - $ref: "#/definitions/Author"
      publishers:
        type: array
        description: Book publisher(s)
        items:
          $ref: "#/definitions/Publisher"
  Genre:
    type: object
    required:
      - name
    properties:
      id:
        type: integer
        description: Genre ID
      name:
        type: string
        description: Genre name
  Language:
    type: object
    required:
      - name
    properties:
      id:
        type: integer
        description: Language ID
      name:
        type: string
        description: Language name
  Publisher:
    type: object
    required:
      - name
    properties:
      id:
        type: integer
        description: Publisher ID
      name:
        type: string
        description: Publisher name
  Series:
    type: object
    required:
      - name
    properties:
      id:
        type: integer
        description: Series ID
      name:
        type: string
        description: Series name

responses:
  ObjectCreated:
    description: Object succesfully created
  ObjectUpdated:
    description: Object succesfully updated
  ObjectDeleted:
    description: Object succesfully deleted
  ObjectExists:
    description: Object already exists
  ObjectNotExists:
    description: Object doesn't exist
  ReturnSingleBook:
    description: Returns a single object from the database
    schema:
      $ref: "#/definitions/Book"
  ReturnSingleAuthor:
    description: Returns a single object from the database
    schema:
      $ref: "#/definitions/Author"
  ReturnSingleGenre:
    description: Returns a single object from the database
    schema:
      $ref: "#/definitions/Genre"
  ReturnSingleLanguage:
    description: Returns a single object from the database
    schema:
      $ref: "#/definitions/Language"
  ReturnSinglePublisher:
    description: Returns a single object from the database
    schema:
      $ref: "#/definitions/Publisher"
  ReturnSingleSeries:
    description: Returns a single object from the database
    schema:
      $ref: "#/definitions/Series"
  ReturnMultipleBooks:
    description: Returns multiple objects from the database
    schema:
      type: array
      items:
      - $ref: "#/definitions/Book"
  ReturnMultipleAuthors:
    description: Returns multiple objects from the database
    schema:
      type: array
      items:
      - $ref: "#/definitions/Author"
  ReturnMultipleGenres:
    description: Returns multiple objects from the database
    schema:
      type: array
      items:
      - $ref: "#/definitions/Genre"
  ReturnMultipleLanguages:
    description: Returns multiple objects from the database
    schema:
      type: array
      items:
      - $ref: "#/definitions/Language"
  ReturnMultiplePublishers:
    description: Returns multiple objects from the database
    schema:
      type: array
      items:
      - $ref: "#/definitions/Publisher"
  ReturnMultipleSeries:
    description: Returns multiple objects from the database
    schema:
      type: array
      items:
      - $ref: "#/definitions/Series"
